#!/usr/bin/env Rscript

################################################################################
# Test Suite
################################################################################

################################################################################
# External dependencies
################################################################################

for (.requirement in c("logging", "RUnit")) {
  if (! .requirement %in% rownames(installed.packages())) {
    install.packages(.requirement, repos="http://cran.rstudio.com/")
  }
}

library(logging)
library(RUnit)

################################################################################
# Random Seed
################################################################################

set.seed(1994) # a good year for Brazil

################################################################################
# Logging configuration
################################################################################

basicConfig()

################################################################################
# Suite Definition and Execution
################################################################################

testsuite <- defineTestSuite("testsuite",
                             dirs="test/",
                             testFileRegexp="^.+_test.R$")
res <- runTestSuite(testsuite)

print(res)
